<form class="multisteps-form__form" id="wizard" method="POST" enctype="multipart/form-data">
    <div class="form-area position-relative">
        <div class="multisteps-form__panel js-active" data-animation="scaleIn">
            <div class="wizard-forms position-relative form-step">
                <div class="wizard-inner-box">
                    <div class="inner-title text-center">
                        <h2>Ayo bantu kami menjadi lebih baik </h2>
                    </div>
                    <div class="col-md-12">
                        <label class="need-job-icon-text text-center col-md-12 mt-5 mb-5 start_survey" data-sound="off">
                            <span class="need-job-text-inner" style="height: 400px !important;">
                                <!-- <span class="checkbox-circle-mark position-absolute"> </span> -->
                                <span class="need-job-icon">
                                    <img src="assets/img/sd1.png" alt="">
                                </span>
                                <span class="need-job-text mt-4 pt-5">
                                    <h2 class="text-uppercase need-job-title">
                                        <!-- <h2>MULAI</h2> --> SENTUH UNTUK MEMULAI!!
                                    </h2>
                                </span>
                            </span>
                        </label>
                    </div>
                    <div class="col-md-12">
                        <i class="fas fa-volume-mute"></i>
                        <button type="button" class="btn btn-primary btn-lg btn-block start_survey" data-sound="on">
                            <svg xmlns="http://www.w3.org/2000/svg" height="0.875em" viewBox="0 0 640 512">
                                <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <style>
                                    svg {
                                        fill: #ffffff
                                    }
                                </style>
                                <path d="M533.6 32.5C598.5 85.3 640 165.8 640 256s-41.5 170.8-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 331.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 225.9 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z" />
                            </svg> <strong> DENGAN BANTUAN SUARA</strong></button>
                        <button type="button" class="btn btn-primary btn-lg btn-block start_survey" data-sound="off">
                            <svg xmlns="http://www.w3.org/2000/svg" height="0.875em" viewBox="0 0 576 512">
                                <!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <style>
                                    svg {
                                        fill: #ffffff
                                    }
                                </style>
                                <path d="M301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3zM425 167l55 55 55-55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-55 55 55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-55-55-55 55c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l55-55-55-55c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0z" />
                            </svg> <strong> TANPA BANTUAN SUARA</strong></button>
                        <!-- <a class="btn btn-primary"><span class="js-btn-next js-btn-next4" title="Selanjutnya">Selanjutnya</span></a> -->
                    </div>

                </div>
                <div class="actions mt-3">
                    <ul>
                        <li hidden><span class="js-btn-next js-btn-next0" title="Selanjutnya">Selanjutnya</span></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="multisteps-form__panel" data-animation="scaleIn">
            <div class="wizard-forms position-relative form-step-2">
                <div class="wizard-inner-box">
                    <div class="inner-title text-center">
                        <h2>Bagaimana Kepuasan anda terhadap Aksess Layanan ?</h2>
                    </div>
                    <div class="opsisurvey col-md-12" id="aksess_layanan"></div>
                </div>
                <div class="actions mt-3">
                    <ul>
                        <li><span class="js-btn-prev" title="Kembali"> Kembali</span></li>
                        <li hidden><span class="js-btn-next js-btn-next1" title="Selanjutnya">Selanjutnya</span></li>
                    </ul>
                </div>
            </div>
            <div class="bottom-vector position-absolute">
                <img src="assets/img/sd1.png" style="margin-left: 100px" alt="">
            </div>
        </div>
        <div class="multisteps-form__panel" data-animation="scaleIn">
            <div class="wizard-forms form-step-3">
                <div class="wizard-inner-box">
                    <div class="inner-title text-center">
                        <h2>Bagaimana Kepuasan anda terhadap Mutu Layanan ?</h2>
                    </div>
                    <div class="opsisurvey col-md-12" id="mutu_layanan"></div>
                </div>

                <div class="actions mt-3">
                    <ul>
                        <li><span class="js-btn-prev" title="Kembali"> Kembali</span></li>
                        <li hidden><span class="js-btn-next js-btn-next2" title="Selanjutnya">Selanjutnya</span></li>
                    </ul>
                </div>
                <div class="bottom-vector position-absolute">
                    <img src="assets/img/sd1.png" style="margin-left: 100px" alt="">
                </div>
            </div>
        </div>
        <div class="multisteps-form__panel" data-animation="scaleIn">
            <div class="wizard-forms form-step-4">
                <div class="wizard-inner-box">
                    <div class="inner-title text-center">
                        <h2>Bagaimana kepuasan terhadap proses layanan kesehatan termasuk pegawai?</h2>
                    </div>
                    <div class="opsisurvey col-md-12" id="proses_layanan"></div>
                </div>
                <div class="actions mt-3">
                    <ul>
                        <li><span class="js-btn-prev" title="Kembali"> Kembali</span></li>
                        <li hidden><span class="js-btn-next js-btn-next3" title="Selanjutnya">Selanjutnya</span></li>
                    </ul>
                </div>
                <div class="bottom-vector position-absolute">
                    <img src="assets/img/sd1.png" style="margin-left: 100px" alt="">
                </div>
            </div>
        </div>
        <div class="multisteps-form__panel" data-animation="scaleIn">
            <div class="wizard-forms form-step-5">
                <div class="wizard-inner-box">
                    <div class="inner-title text-center">
                        <h2>Bagaimana kepuasan terhadap Sistem Layanan ?</h2>
                    </div>
                    <div class="opsisurvey col-md-12" id="sistem_layanan"></div>
                </div>
                <div class="actions mt-3">
                    <ul>
                        <li><span class="js-btn-prev" title="Kembali"> Kembali</span></li>
                        <li hidden><span class="js-btn-next js-btn-next4" title="Selanjutnya">Selanjutnya</span></li>
                        <li><button type="" id="submit_btn"><span class="" title="Simpan">Simpan </span></button></li>
                    </ul>
                </div>
                <div class="bottom-vector position-absolute">
                    <img src="assets/img/sd1.png" style="margin-left: 100px" alt="">
                </div>
            </div>
        </div>
        <div class="multisteps-form__panel" data-animation="scaleIn">
            <div class="wizard-forms form-step-6">
                <div class="wizard-inner-box">
                    <div class="thank-content text-center">
                        <div class="thank-img">
                            <img src="assets/img/th1.png" alt="">
                        </div>
                        <div class="thank-text">
                            <h2>Terimakasih</h2>
                            <p>atas penilaian anda terhadap Puskesmas Puding Besar</p>
                        </div>
                        <div class="thank-btn text-uppercase">
                            <a href="<?= base_url('survey') ?>">Kembali</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</form>
<script>
    function renderOption(kolom, id, required = "") {
        var opsi = ` <div class="row">
        <div class="col-md-6">
                                                <label class="need-job-icon-text text-center col-md-12 ">
                                                    <input  type="radio" name="${kolom}" value="2" class="j-checkbox">
                                                    <span class="need-job-text-inner">
                                                        <span class="checkbox-circle-mark position-absolute"> </span>
                                                        <span class="need-job-icon">
                                                            <img src="assets/img/bt1.png" alt="">
                                                        </span>
                                                        <span class="need-job-text">
                                                            <span class="text-uppercase need-job-title">Puas</span>
                                                        </span>
                                                    </span>
                                                </label>
                                            </div>   <div class="col-md-6">
                                                <label class="need-job-icon-text text-center col-md-12 ">
                                                    <input required="${required}" type="radio" name="${kolom}" value="1" class="j-checkbox">
                                                    <span class="need-job-text-inner">
                                                        <span class="checkbox-circle-mark position-absolute"> </span>
                                                        <span class="need-job-icon">
                                                            <img src="assets/img/bt4.png" alt="">
                                                        </span>
                                                        <span class="need-job-text">
                                                            <span class="text-uppercase need-job-title">Tidak Puas</span>
                                                        </span>
                                                    </span>
                                                </label>
                                            </div>
                                           
                                        </div>`;
        $('#' + id).html(opsi);
    }
    renderOption('aksess', 'aksess_layanan');
    renderOption('mutu', 'mutu_layanan');
    renderOption('proses', 'proses_layanan');
    renderOption('sistem', 'sistem_layanan', 'required');
    var wizardForm = $("#wizard");
    $("#submit_btn").on("click", (ev) => {
        ev.preventDefault();
        Swal.fire({
            title: "Loading !",
            html: "sedang mengumpulkan survey", // add html attribute if you want or remove
            allowOutsideClick: false,
        });
        Swal.showLoading();
        $.ajax({
            url: "<?= base_url() . 'main/submit_survey' ?>",
            type: "POST",
            data: wizardForm.serialize(),
            success: (data) => {
                // buttonIdle(submitBtn);
                Swal.close();
                json = JSON.parse(data);
                if (json["error"]) {
                    Swal.fire({
                        icon: "error",
                        title: "Gagal",
                        text: json["message"],
                    });
                    return;
                }
                $(".js-btn-next4").trigger("click");
                audio4.pause();
                audio5.play();
                setTimeout(function() {
                    location.reload();
                }, 10000);
            },
            error: () => {},
        });
    });
</script>